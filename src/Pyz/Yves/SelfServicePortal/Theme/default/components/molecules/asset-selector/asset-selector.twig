{% extends model('component') %}

{% define config = {
    name: 'asset-selector',
} %}

{% define data = {
    id: random(),
} %}

{% define data = {
    formFieldName: required,
    isDisabled: false,
    placeholder: '',
} %}

{% define attributes = {
    'trigger-class-name': 'js-asset-finder__trigger-' ~ data.id,
} %}

{% block body %}
    <div class="{{ config.name }}__container {{ config.name }}__container--select">
        <strong class="{{ config.name }}__subtitle">{{ 'self_service_portal.asset.selector.label' | trans }}</strong>

        <button type="button" class="link link--additional {{ attributes['trigger-class-name'] }}">
            {{ 'self_service_portal.asset.selector.button' | trans }}
        </button>
    </div>

    <input type="hidden" name="{{ data.formFieldName }}" class="{{ config.jsName }}__value">

    <div class="{{ config.name }}__container {{ config.name }}__container--selected">
        <div class="{{ config.name }}__data spacing-bottom--big">
            <div class="{{ config.name }}__content">
                <strong class="{{ config.name }}__subtitle">{{ 'self_service_portal.asset.assigned_asset' | trans }}</strong>
            </div>

            <button type="button" class="link link--additional {{ attributes['trigger-class-name'] }}">
                {{ 'self_service_portal.asset.selector.change' | trans }}
            </button>
        </div>

        <div class="{{ config.name }}__content">
            <strong class="{{ config.name }}__subtitle {{ config.jsName }}__asset-name"></strong>

            <span class="{{ config.name }}__data">
                <span class="{{ config.name }}__information">
                    <span>{{ 'self_service_portal.asset.item.serial' | trans }}:</span>
                    <span class="{{ config.jsName }}__asset-text {{ config.name }}__asset-text"></span>
                </span>

                <span class="{{ config.name }}__status"></span>
            </span>
        </div>
    </div>

    {% include molecule('main-popup') with {
        modifiers: ['auto'],
        class: config.jsName ~ '__popup',
        data: {
            title: 'self_service_portal.asset.modal.header' | trans,
            content: block('finder'),
        },
        attributes: {
            'content-id': config.jsName ~ '__popup-content-' ~ data.id,
            'trigger-class-name': attributes['trigger-class-name'],
            'has-content-mount': true,
        },
    } only %}
{% endblock %}

{% block finder %}
    {% include molecule('asset-finder', 'SelfServicePortal') with {
        data: {
            formFieldName: data.formFieldName,
            isDisabled: data.isDisabled,
            placeholder: data.placeholder,
        },
        attributes: {
            'input-class-name': "#{config.jsName}__value",
            'selected-asset-class-name': "#{config.jsName}__asset-text",
            'selected-name-class-name': "#{config.jsName}__asset-name",
            'container-class-name': config.name,
            'popup-class-name': "#{config.jsName}__popup",
        },
    } only %}
{% endblock %}
