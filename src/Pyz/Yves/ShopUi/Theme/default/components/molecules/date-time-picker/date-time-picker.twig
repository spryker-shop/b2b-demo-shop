{% extends model('component') %}

{% define config = {
    name: 'date-time-picker',
    tag: 'date-time-picker',
} %}

{% define data = {
    field: {},
    input: {},
    fieldClass: '',
    iconName: 'calendar',
} %}

{% define attributes = {
    'language': required,
    'parent-id': '.' ~ config.name,
    'config': '{}',
    'formatted-date-time': '',
    'date-from-id': false,
    'date-to-id': false,
} %}

{% block body %}
    <div class="{{ config.name }}__content">
        {% block input %}
            {% set class = config.name ~ '__field' ~ (data.fieldClass ? ' ' ~ data.fieldClass) %}

            {% if data.field  %}
                {{ form_row(data.field, {
                    attr: {
                        class: class,
                    },
                }) }}
            {% else %}
                {% if data.input.label %}
                    <label {% if data.input.attrs.id %}for="{{ data.input.attrs.id }}"{% endif %} class="label">{{ data.input.label | trans }}</label>
                {% endif %}

                <input type="text" class="input input--expand {{ class }}" {{ _self.renderAttributes(data.input.attrs) }}>
            {% endif %}
        {% endblock %}

        {% block calendar %}
            <div class="{{ config.name }}__calendar">
                {% block calendarButton %}
                    {% if data.iconName %}
                        <button type="button" class="{{ config.name }}__calendar-button">
                            {% include atom('icon') with {
                                class: config.name ~ '__icon',
                                data: {
                                    name: data.iconName,
                                },
                            } only %}
                        </button>
                    {% endif %}
                {% endblock %}

                {% block calendarInput %}
                    <input aria-label="{{ 'shop_ui.aria_label.choose-date' | trans }}"
                           class="{{ config.name }}__datepicker-input" data-id="{{ data.field.vars.id }}" tabindex="-1">
                {% endblock %}
            </div>
        {% endblock %}
    </div>
{% endblock %}
