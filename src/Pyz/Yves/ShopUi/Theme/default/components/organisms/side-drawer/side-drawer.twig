{% extends model('component') %}

{% define config = {
    name: 'side-drawer',
    tag: 'side-drawer',
} %}

{% define attributes = {
    'trigger-class-name': required,
    'container-class-name': '',
    'locked-body-class-name': 'is-locked-tablet',
} %}

{% block body %}
    <div class="{{ config.name }}__overlay {{ attributes['trigger-class-name'] }}"></div>

    <aside class="{{ config.name }}__drawer {% if is_granted('ROLE_USER') %} {{ config.name }}__drawer--logged{% endif %}">
        {% block close %}
            <button class="{{ config.name }}__close {{ attributes['trigger-class-name'] }}">
                {% include atom('icon') with {
                    data: {
                        name: 'cross',
                    },
                } only %}
            </button>
        {% endblock %}

        {% block topBlock %}
            <div class="grid grid--gap-smaller {{ config.name }}__navigation-top">
                {% if is_granted('ROLE_USER') %}
                    <div class="col col--sm-5 {{ config.name }}__navigation-top-actions">
                        {% widget 'PriceModeSwitcherWidget' only %}{% endwidget %}
                    </div>
                    <div class="col col--sm-4 {{ config.name }}__navigation-top-actions">
                        {% widget 'CurrencyWidget' only %}{% endwidget %}
                    </div>
                    <div class="col col--sm-3 {{ config.name }}__navigation-top-actions">
                        {% widget 'LanguageSwitcherWidget' args [app.request.pathInfo, app.request.queryString, app.request.requestUri] only %}{% endwidget %}
                    </div>
                {% else %}
                    <div class="col col--sm-4 {{ config.name }}__navigation-top-actions">
                        {% widget 'LanguageSwitcherWidget' args [app.request.pathInfo, app.request.queryString, app.request.requestUri] only %}{% endwidget %}
                    </div>
                    <div class="col col--expand">
                        <a href="{{ url('login') }}" class="button button--tight button--expand {{ config.name }}__login">{{ 'customer.please_login' | trans }}</a>
                    </div>
                {% endif %}
            </div>
        {% endblock %}

        <div class="{{ config.name }}__holder">
            <div class="{{ config.name }}__navigation">
                {% block navigation %}
                    {% widget 'NavigationWidget' args ['MAIN_NAVIGATION', 'navigation-main'] only %}{% endwidget %}
                {% endblock %}
            </div>

            <div class="{{ config.name }}__info">
                <a href="tel:{{ 'global.phone.number' | trans | replace({' ': ''}) }}" class="{{ config.name }}__contact">
                    <span class="{{ config.name }}__contact-icon">
                        {% include atom('icon') with {
                            modifiers: ['bigger'],
                            data: {
                                name: 'cell-phone',
                            },
                        } only %}
                    </span>
                    <span class="{{ config.name }}__contact-text {{ config.name }}__contact-text--weight">{{ 'global.contact_us' | trans }}:</span>
                    <span class="{{ config.name }}__contact-text">{{ 'global.phone.number' | trans}}</span>
                </a>
                {% if is_granted('ROLE_USER') %}
                    <a href="{{ url('logout') }}" class="spacing-top spacing-top--big button button--hollow button--expand">{{ 'customer.logout' | trans }}</a>
                {% endif %}
            </div>
        </div>
    </aside>
{% endblock %}
