{% extends model('component') %}

{% define config = {
    name: 'quick-order-file-upload',
    tag: 'quick-order-file-upload',
} %}

{% define data = {
    uploadOrderForm: required,
    fileTemplateExtensions: null,
} %}

{% define attributes = {
    'input-file-id': data.uploadOrderForm.children.fileUploadOrder.vars.id,
} %}

{% block body %}
    <div class="{{ config.name }}__content">
        <h5 class="{{ config.name }}__title spacing-bottom">{{ 'quick-order.file-upload-order.title' | trans }}</h5>

        {% include molecule('form') with {
            modifiers: ['hidden-actions'],
            class: 'spacing-x--inner spacing-x--reset',
            data: {
                form: data.uploadOrderForm,
                enableStart: false,
                enableEnd: false
            },
            embed: {
                fileTemplateExtensions: data.fileTemplateExtensions,
                parentClass: config.name,
                parentJsClass: config.jsName
            }
        } only %}

        <button type="submit" name="uploadOrder" class="button button--expand spacing-top">
            {{ 'quick-order.file-upload-order.button.upload' | trans }}
        </button>

        {% if data.fileTemplateExtensions %}
            <div class="grid grid--gap grid--center spacing-top">
                {% for fileTemplateExt in data.fileTemplateExtensions %}
                    <div class="col col--sm-12 spacing-top">
                        <a class="{{ config.name }}__download-link" href="{{ path('quick-order/download-template', {'file-type': fileTemplateExt}) }}">
                            {% include atom('icon') with {
                                modifiers: ['download-file'],
                                data: {
                                    name: 'download-file'
                                }
                            } only %}

                            {{ 'quick-order.file-upload-order.file-template-download-message' | trans({'%template%': fileTemplateExt})}}
                        </a>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    </div>
{% endblock %}
